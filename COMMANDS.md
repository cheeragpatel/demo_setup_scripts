# Command Reference

## Available Commands

### Setup Commands

#### `npm start` or `node setup-repos.js`
Creates workshop repositories for all attendees listed in the CSV file.

**What it does:**
- Creates a complete duplicate repository for each attendee
- Copies all branches, files, and commit history from the source repository
- Adds attendees as admin collaborators
- Skips repositories that already exist

**Example:**
```bash
npm start
# Creates: demo-repo-johndoe, demo-repo-janesmith, etc.
```

#### `npm run validate` or `node validate-config.js`
Validates your configuration before running the setup.

**What it checks:**
- GitHub token validity and permissions
- Source repository accessibility
- Target organization access
- CSV file format and attendee usernames
- Required branches in source repository

**Example:**
```bash
npm run validate
# ‚úÖ Configuration validation completed successfully!
```

### Cleanup Commands

#### `npm run cleanup:dry-run` or `node cleanup-repos.js --dry-run`
**SAFE PREVIEW** - Shows what repositories would be deleted without actually deleting them.

**What it does:**
- Scans for existing workshop repositories
- Lists all repositories that would be deleted
- Shows repository details (owner, creation date, URL)
- Does NOT delete anything

**Example:**
```bash
npm run cleanup:dry-run
# üîç REPOSITORIES THAT WOULD BE DELETED (DRY RUN)
# 1. workshop-2024/demo-repo-johndoe
#    Owner: johndoe
#    Created: 11/10/2024, 10:30:00 AM
```

#### `npm run cleanup` or `node cleanup-repos.js`
**‚ö†Ô∏è DESTRUCTIVE** - Permanently deletes all workshop repositories.

**What it does:**
- Finds all workshop repositories in the target organization
- Shows detailed list of repositories to be deleted
- Requires explicit confirmation (must type "DELETE")
- Permanently deletes all confirmed repositories

**Example:**
```bash
npm run cleanup
# ‚ùì Are you sure you want to delete these repositories? (type "DELETE" to confirm): DELETE
# üóëÔ∏è Deleting repository: workshop-2024/demo-repo-johndoe...
# ‚úÖ Successfully deleted: workshop-2024/demo-repo-johndoe
```

## Command Line Arguments

### Setup Script Arguments

```bash
node setup-repos.js [options]
```

**Options:**
- `--cleanup` or `-c`: Redirect to cleanup mode

### Cleanup Script Arguments

```bash
node cleanup-repos.js [options]
```

**Options:**
- `--dry-run` or `-n`: Preview mode (shows what would be deleted)
- `--force` or `-f`: Skip confirmation prompt (use with extreme caution)

## Environment Variables

All commands use the same environment variables from `.env`:

```env
GITHUB_TOKEN=your_github_token_here
SOURCE_ORG=your-source-org
SOURCE_REPO=demo-repo
TARGET_ORG=your-target-org
CSV_FILE=attendees.csv
```

## Output Files

### Setup Results
- **File**: `setup-results-YYYY-MM-DD.json`
- **Content**: Detailed results of repository creation
- **Generated by**: `npm start`

### Cleanup Results
- **File**: `cleanup-results-YYYY-MM-DD.json`  
- **Content**: Detailed results of repository deletion
- **Generated by**: `npm run cleanup`

## Safety Features

### For Setup
- ‚úÖ Skips repositories that already exist
- ‚úÖ Validates configuration before starting
- ‚úÖ Rate limiting protection
- ‚úÖ Detailed error reporting

### For Cleanup
- ‚úÖ **Dry-run mode** for safe previewing
- ‚úÖ **Explicit confirmation required** (must type "DELETE")
- ‚úÖ Lists all repositories before deletion
- ‚úÖ Shows repository details (owner, creation date)
- ‚úÖ Individual error handling per repository

## Typical Workflow

```bash
# 1. Validate setup
npm run validate

# 2. Create repositories for workshop
npm start

# ... conduct workshop ...

# 3. Preview cleanup (safe)
npm run cleanup:dry-run

# 4. Clean up after workshop
npm run cleanup
```

## Error Handling

All commands provide:
- Real-time progress updates
- Detailed error messages
- Summary reports
- JSON result files for debugging

Common error scenarios are handled gracefully with informative messages and recovery suggestions.